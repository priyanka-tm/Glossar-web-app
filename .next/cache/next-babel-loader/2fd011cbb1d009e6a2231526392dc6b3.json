{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport { fetchProductIdCartData, addCartData, updateCartData, removeCartData } from \"../apis/cart\";\nexport var onAddProductToCart = function onAddProductToCart(_ref) {\n  var product = _ref.product,\n      _ref$quantity = _ref.quantity,\n      quantity = _ref$quantity === void 0 ? 1 : _ref$quantity,\n      onSuccess = _ref.onSuccess,\n      onError = _ref.onError,\n      _ref$getQuantityAvail = _ref.getQuantityAvailable,\n      getQuantityAvailable = _ref$getQuantityAvail === void 0 ? function () {\n    return true;\n  } : _ref$getQuantityAvail;\n  console.log('product: ', product);\n  fetchProductIdCartData(product.id).then(function (res) {\n    console.log('res:========= ', res);\n\n    if (res.data.length === 0) {\n      if (product.quantity === 0) {\n        onError && onError(\"Reached maximum number of products\");\n        getQuantityAvailable && getQuantityAvailable(false);\n      } else {\n        addCartData(_objectSpread(_objectSpread({}, product), {}, {\n          id: uuidv4(),\n          productId: product.id,\n          cartQuantity: quantity\n        })).then(function (res) {\n          return onSuccess && onSuccess(res);\n        })[\"catch\"](function (err) {\n          return onError && onError(\"Add product to cart failed, please try again\", err);\n        });\n      }\n    } else {\n      var pData = res.data[0];\n\n      if (pData.cartQuantity + quantity > pData.quantity) {\n        onError && onError(\"Reached maximum number of products\");\n        getQuantityAvailable(false);\n      } else {\n        updateCartData(pData.id, {\n          cartQuantity: pData.cartQuantity + quantity\n        }).then(function (res) {\n          onSuccess && onSuccess(res);\n        })[\"catch\"](function (err) {\n          return onError && onError(\"Add product to cart failed, please try again\", err);\n        });\n      }\n    }\n  })[\"catch\"](function (err) {\n    return onError && onError(\"Add product to cart failed, please try again\", err);\n  });\n};\nexport var onRemoveProductFromCart = function onRemoveProductFromCart(_ref2) {\n  var cartId = _ref2.cartId,\n      onSuccess = _ref2.onSuccess,\n      onError = _ref2.onError;\n\n  if (cartId && cartId !== \"\" && cartId !== null) {\n    removeCartData(cartId).then(function (res) {\n      return onSuccess && onSuccess(res);\n    })[\"catch\"](function (err) {\n      return onError && onError(\"Remove product failm, pleaser try again\", err);\n    });\n  }\n};\nexport var onChangeProductCartQuantity = function onChangeProductCartQuantity(_ref3) {\n  var product = _ref3.product,\n      quantity = _ref3.quantity,\n      onSuccess = _ref3.onSuccess;\n\n  if (quantity > product.quantity || quantity < 1) {\n    return;\n  }\n\n  updateCartData(product.id, {\n    cartQuantity: quantity\n  }).then(function (res) {\n    return onSuccess && onSuccess(res);\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};","map":{"version":3,"sources":["E:/clg-project/Glossar-web-app/src/common/cartServices.js"],"names":["v4","uuidv4","fetchProductIdCartData","addCartData","updateCartData","removeCartData","onAddProductToCart","product","quantity","onSuccess","onError","getQuantityAvailable","console","log","id","then","res","data","length","productId","cartQuantity","err","pData","onRemoveProductFromCart","cartId","onChangeProductCartQuantity"],"mappings":"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","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\nimport {\r\n  fetchProductIdCartData,\r\n  addCartData,\r\n  updateCartData,\r\n  removeCartData,\r\n} from \"../apis/cart\";\r\n\r\nexport const onAddProductToCart = ({\r\n  product,\r\n  quantity = 1,\r\n  onSuccess,\r\n  onError,\r\n  getQuantityAvailable = () => true,\r\n}) => {\r\n  console.log('product: ', product);\r\n  fetchProductIdCartData(product.id)\r\n    .then((res) => {\r\n      console.log('res:========= ', res);\r\n      if (res.data.length === 0) {\r\n        if (product.quantity === 0) {\r\n          onError && onError(\"Reached maximum number of products\");\r\n          getQuantityAvailable && getQuantityAvailable(false);\r\n        } else {\r\n          addCartData({\r\n            \r\n            ...product,\r\n            id: uuidv4(),\r\n            productId: product.id,\r\n            cartQuantity: quantity,\r\n          })\r\n            .then((res) => onSuccess && onSuccess(res))\r\n            .catch(\r\n              (err) =>\r\n                onError &&\r\n                onError(\"Add product to cart failed, please try again\", err)\r\n            );\r\n        }\r\n      } else {\r\n        let pData = res.data[0];\r\n        if (pData.cartQuantity + quantity > pData.quantity) {\r\n          onError && onError(\"Reached maximum number of products\");\r\n          getQuantityAvailable(false);\r\n        } else {\r\n          updateCartData(pData.id, {\r\n            cartQuantity: pData.cartQuantity + quantity,\r\n          })\r\n            .then((res) => {\r\n              onSuccess && onSuccess(res);\r\n            })\r\n            .catch(\r\n              (err) =>\r\n                onError &&\r\n                onError(\"Add product to cart failed, please try again\", err)\r\n            );\r\n        }\r\n      }\r\n    })\r\n    .catch(\r\n      (err) =>\r\n        onError && onError(\"Add product to cart failed, please try again\", err)\r\n    );\r\n};\r\n\r\nexport const onRemoveProductFromCart = ({ cartId, onSuccess, onError }) => {\r\n  if (cartId && cartId !== \"\" && cartId !== null) {\r\n    removeCartData(cartId)\r\n      .then((res) => onSuccess && onSuccess(res))\r\n      .catch(\r\n        (err) =>\r\n          onError && onError(\"Remove product failm, pleaser try again\", err)\r\n      );\r\n  }\r\n};\r\n\r\nexport const onChangeProductCartQuantity = ({\r\n  product,\r\n  quantity,\r\n  onSuccess,\r\n}) => {\r\n  if (quantity > product.quantity || quantity < 1) {\r\n    return;\r\n  }\r\n  updateCartData(product.id, { cartQuantity: quantity })\r\n    .then((res) => onSuccess && onSuccess(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n"]},"metadata":{},"sourceType":"module"}